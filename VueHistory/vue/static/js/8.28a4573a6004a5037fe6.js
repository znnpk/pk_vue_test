webpackJsonp([8],{C9N8:function(e,t){},HSm9:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("RRo+"),c=a.n(n),o=a("Wxq9"),l=["小学","初中","高中","大学"],r={inject:["reload"],name:"AgencyManger",mounted:function(){},methods:{saveAgency:function(){var e=this,t=this;console.log(this.agencyAddForm),this.$refs.agencyAddForm.validate(function(a){if(!a)return!1;e.$api.article.agencyManger("agencySave",{agencyAddForm:e.agencyAddForm}).then(function(a){e.$notify.success({title:"成功",message:"记录已上传"}),e.agencyAddFormVisible=!1,t.reload()})})},handleChange:function(e){},pageList:function(){this.data=listJson.list,this.dateList=listJson.dateList,this.getList()},getList:function(){var e=this,t=this.data.filter(function(t,a){return t.agencyName.includes(e.searchData)||t.agencyDealer.includes(e.searchData)||t.agencyOperScp.includes(e.searchData)||t.agencyContactor.includes(e.searchData)||t.agencyAddr.includes(e.searchData)||t.agencyRsk.includes(e.searchData)});this.list=t.filter(function(t,a){return a<e.page*e.limit&&a>=e.limit*(e.page-1)}),this.total=t.length},handleSizeChange:function(e){console.log("每页 "+e+" 条"),this.limit=e,this.getList()},handleCurrentChange:function(e){console.log("当前页: "+e),this.page=e,this.getList()},search:function(){this.page=1,this.getList()},dailogClose:function(e){this.$confirm("确认关闭？").then(function(t){e()}).catch(function(e){})},editAgencyForVisible:function(e){var t=this;this.agencyEditFormVisible=!0,this.$api.article.agencyManger("getAgencyByAgencyId",{agencyId:e.agencyId}).then(function(a){console.log(e.schId),200===a.code?(console.log(a.agencyEditForm),t.agencyEditForm=a.agencyEditForm,console.log("学校信息获取成功")):(console.log("学校数据获取失败"),t.$notify.error({title:"错误",message:"学校信息获取失败 稍后重试"}))})},updateAgency:function(){var e=this,t=this;console.log(this.agencyEditForm),this.$refs.agencyEditForm.validate(function(a){if(!a)return!1;e.$api.article.agencyManger("updateAgencyByAgencyId",{agencyEditForm:e.agencyEditForm}).then(function(a){e.$notify.success({title:"成功",message:"记录修改成功"}),e.agencyEditFormVisible=!1,t.reload()})})},deleteAgency:function(e){var t=this;this.$confirm("确认删除当前这条记录？").then(function(a){t.$api.article.agencyManger("deleteAgencyByAgencyId",{agencyId:e.agencyId}).then(function(e){200===e.code?(console.log("删除成功"),t.$notify.success({title:"成功",message:"删除成功"})):(console.log("删除失败"),t.$notify.error({dangerouslyUseHTMLString:!0,title:"错误",message:e.message})),t.reload()})}).catch(function(e){})},clearFilter:function(){this.$refs.schsShowTable.clearFilter(),this.searchData="",this.getList()},formatter:function(e,t){return e.address},filterTag:function(e,t){return t.schCorpIndiv===e},schInstFilter:function(e,t,a){var n=!1;return t[a.property].forEach(function(t){t.name==e&&(n=!0)}),n},filterHandler:function(e,t,a){return console.log(e),console.log("截断"),t[a.property]===e},toggleSelection:function(e){var t=this;e?e.forEach(function(e){t.$refs.schsShowTable.toggleRowSelection(e)}):this.$refs.schsShowTable.clearSelection()},handleSelectionChange:function(e){this.multipleSelection=e},tableRowClassName:function(e){e.row;return e.rowIndex%2==1?"warning-row":"success-row"}},data:function(){return{options:o.regionData,selectedOptions:[],rules:{rePassword:[{validator:"test",trigger:"blur"}],agencyContactTele:[{required:!0,validator:function(e,t,a){var n=/^1[3|4|5|7|8][0-9]{9}$/;if(!t)return a();setTimeout(function(){c()(+t)?n.test(t)?a():a(new Error("电话号码格式不正确")):a(new Error("请输入数字值"))},100)},trigger:"blur"}]},textLabelWidth:"100px",cities:l,checkList:[],agencyLists:[],agencyEditForm:{agencyId:"",agencyName:"",agencyAddr:"",agencyLoog:"",agencyLat:"",agencyDealer:"",agencyContactor:"",agencyContactTele:"",agencyOperScp:"",agencyStatus:"",agencyShortRsk:"",agencyRsk:""},agencyAddForm:{agencyId:"",agencyName:"",agencyAddr:"",agencyLoog:"",agencyLat:"",agencyDealer:"",agencyContactor:"",agencyContactTele:"",agencyOperScp:"",agencyStatus:"",agencyShortRsk:"",agencyRsk:""},agencyEditFormVisible:!1,agencyAddFormVisible:!1,formLabelWidth:"120px",list:[],data:[],dateList:[],limit:5,total:null,page:1,searchData:""}},created:function(){var e=this;this.$api.article.agencyManger("getAgencys",{userName:this.$store.state.userName}).then(function(t){console.log(t),e.data=t.agencyLists,e.getList()})}},i={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-row",[a("el-col",{attrs:{span:6}},[a("el-input",{attrs:{placeholder:"公司名,经销商,业务范围,地址,公司备注的单项搜索"},model:{value:e.searchData,callback:function(t){e.searchData=t},expression:"searchData"}},[e._v(">")])],1),e._v(" "),a("el-col",{attrs:{span:2}},[a("el-button",{attrs:{icon:"el-icon-search",circle:""},on:{click:e.search}})],1),e._v(" "),a("el-button",{attrs:{type:"info"},on:{click:e.clearFilter}},[e._v("清除所有过滤器")]),e._v(" "),a("el-button",{attrs:{type:"success",round:""},on:{click:function(t){e.agencyAddFormVisible=!0}}},[e._v("新增")])],1),e._v(" "),a("el-dialog",{attrs:{title:"中间商新增",visible:e.agencyAddFormVisible,width:"30%","before-close":e.dailogClose,center:""},on:{"update:visible":function(t){e.agencyAddFormVisible=t}}},[a("el-form",{ref:"agencyAddForm",attrs:{model:e.agencyAddForm,rules:e.rules,"label-width":"80px"}},[a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"中间商名"}},[a("el-input",{staticStyle:{width:"50%"},attrs:{required:""},model:{value:e.agencyAddForm.agencyName,callback:function(t){e.$set(e.agencyAddForm,"agencyName",t)},expression:"agencyAddForm.agencyName"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"经销商"}},[a("el-input",{staticStyle:{width:"50%"},model:{value:e.agencyAddForm.agencyDealer,callback:function(t){e.$set(e.agencyAddForm,"agencyDealer",t)},expression:"agencyAddForm.agencyDealer"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"联系人"}},[a("el-input",{staticStyle:{width:"50%"},model:{value:e.agencyAddForm.agencyContactor,callback:function(t){e.$set(e.agencyAddForm,"agencyContactor",t)},expression:"agencyAddForm.agencyContactor"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{prop:"agencyContactTele",label:"联系电话"}},[a("el-input",{staticStyle:{width:"50%"},model:{value:e.agencyAddForm.agencyContactTele,callback:function(t){e.$set(e.agencyAddForm,"agencyContactTele",t)},expression:"agencyAddForm.agencyContactTele"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"业务范围"}},[a("el-input",{staticStyle:{width:"75%"},model:{value:e.agencyAddForm.agencyOperScp,callback:function(t){e.$set(e.agencyAddForm,"agencyOperScp",t)},expression:"agencyAddForm.agencyOperScp"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"地址"}},[a("el-input",{staticStyle:{width:"90%"},model:{value:e.agencyAddForm.agencyAddr,callback:function(t){e.$set(e.agencyAddForm,"agencyAddr",t)},expression:"agencyAddForm.agencyAddr"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{staticStyle:{width:"80%"},attrs:{label:"备注"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.agencyAddForm.agencyRsk,callback:function(t){e.$set(e.agencyAddForm,"agencyRsk",t)},expression:"agencyAddForm.agencyRsk"}})],1)],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.agencyAddFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.saveAgency}},[e._v("提 交")])],1)],1),e._v(" "),a("el-table",{ref:"schsShowTable",staticStyle:{width:"100%"},attrs:{data:e.list,"row-class-name":e.tableRowClassName,"default-sort":{prop:"agencyName",order:"descending"},border:"","tooltip-effect":"dark"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{sortable:"",prop:"agencyName",label:"中间商名",width:"auto"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("el-tag",{attrs:{size:"medium"}},[e._v(e._s(t.row.agencyName))])],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"agencyDealer",label:"经销商",width:"90"}}),e._v(" "),a("el-table-column",{attrs:{prop:"agencyContactor",label:"联系人",width:"90"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("el-tag",{attrs:{size:"medium"}},[e._v(e._s(t.row.agencyContactor))])],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"agencyContactTele",label:"联系人电话",width:"90"}}),e._v(" "),a("el-table-column",{attrs:{prop:"agencyOperScp",label:"业务范围",width:"auto"}}),e._v(" "),a("el-table-column",{attrs:{prop:"agencyAddr",label:"地址",width:"90"}}),e._v(" "),a("el-table-column",{attrs:{prop:"agencyShortRsk",label:"备注",width:"auto"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("p",[e._v(e._s(t.row.agencyRsk))]),e._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("el-tag",{attrs:{size:"medium"}},[e._v(e._s(t.row.agencyShortRsk))])],1)])]}}])}),e._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",circle:"",size:"small"},on:{click:function(a){return e.editAgencyForVisible(t.row)}}}),e._v(" "),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:"",size:"small"},on:{click:function(a){return e.deleteAgency(t.row)}}})]}}])})],1),e._v(" "),a("el-dialog",{attrs:{title:"中间商编辑",visible:e.agencyEditFormVisible,width:"30%","before-close":e.dailogClose,center:""},on:{"update:visible":function(t){e.agencyEditFormVisible=t}}},[a("el-form",{ref:"agencyEditForm",attrs:{model:e.agencyEditForm,rules:e.rules,"label-width":"80px"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"中间商名"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{required:""},model:{value:e.agencyEditForm.agencyName,callback:function(t){e.$set(e.agencyEditForm,"agencyName",t)},expression:"agencyEditForm.agencyName"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",[a("el-input",{staticStyle:{width:"100%"},attrs:{type:"hidden",required:""},model:{value:e.agencyEditForm.agencyId,callback:function(t){e.$set(e.agencyEditForm,"agencyId",t)},expression:"agencyEditForm.agencyId"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"经销商"}},[a("el-input",{staticStyle:{width:"50%"},model:{value:e.agencyEditForm.agencyDealer,callback:function(t){e.$set(e.agencyEditForm,"agencyDealer",t)},expression:"agencyEditForm.agencyDealer"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"联系人"}},[a("el-input",{staticStyle:{width:"50%"},model:{value:e.agencyEditForm.agencyContactor,callback:function(t){e.$set(e.agencyEditForm,"agencyContactor",t)},expression:"agencyEditForm.agencyContactor"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{prop:"agencyContactTele",label:"联系电话"}},[a("el-input",{staticStyle:{width:"50%"},model:{value:e.agencyEditForm.agencyContactTele,callback:function(t){e.$set(e.agencyEditForm,"agencyContactTele",t)},expression:"agencyEditForm.agencyContactTele"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"业务范围"}},[a("el-input",{staticStyle:{width:"75%"},model:{value:e.agencyEditForm.agencyOperScp,callback:function(t){e.$set(e.agencyEditForm,"agencyOperScp",t)},expression:"agencyEditForm.agencyOperScp"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"地址"}},[a("el-input",{staticStyle:{width:"90%"},model:{value:e.agencyEditForm.agencyAddr,callback:function(t){e.$set(e.agencyEditForm,"agencyAddr",t)},expression:"agencyEditForm.agencyAddr"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{staticStyle:{width:"80%"},attrs:{label:"备注"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.agencyEditForm.agencyRsk,callback:function(t){e.$set(e.agencyEditForm,"agencyRsk",t)},expression:"agencyEditForm.agencyRsk"}})],1)],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.agencyEditFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.updateAgency}},[e._v("提 交")])],1)],1),e._v(" "),a("div",{staticClass:"block"},[a("el-pagination",{attrs:{"hide-on-single-page":!0,background:"","current-page":e.page,"page-sizes":[1,2,5,10],"page-size":e.limit,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},staticRenderFns:[]};var s=a("VU/8")(r,i,!1,function(e){a("C9N8"),a("eKyu")},"data-v-2eadf9d3",null);t.default=s.exports},eKyu:function(e,t){}});
//# sourceMappingURL=8.28a4573a6004a5037fe6.js.map